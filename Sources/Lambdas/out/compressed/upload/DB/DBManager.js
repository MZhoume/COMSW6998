"use strict";var Fields_1=require("../DB/Fields"),DBManager=function(){function e(e){this._db=e}return e.prototype.create=function(e,t,a){var i={},r=t.item;Fields_1.getKeys(e).forEach(function(e){i[e]=r[e]});var n={TableName:e,Item:i};this._db.put(n,a)},e.prototype.read=function(e,t,a){var i={TableName:e,Key:t.key};this._db.get(i,a)},e.prototype.update=function(e,t,a){var i=this;this._db.get({TableName:e,Key:t.key},function(r,n){if(!n)return void console.log("Email: "+t.key.email+" does not exists.");var o=n.Item,s={};Fields_1.getKeys(e).forEach(function(e){t.values[e]&&o[e]!==t.values[e]&&(s[e]={Action:"PUT",Value:t.values[e]})});var u={TableName:e,Key:t.key,AttributeUpdates:s};i._db.update(u,a)})},e.prototype.delete=function(e,t,a){var i={TableName:e,Key:t.key};this._db.delete(i,a)},e.prototype.find=function(e,t,a){var i={TableName:e,FilterExpression:t.expression,ExpressionAttributeValues:t.values};this._db.scan(i,a)},e}();exports.DBManager=DBManager;